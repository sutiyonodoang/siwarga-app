import{r as c,j as e}from"./utils-BSArQRAP.js";import{B as s}from"./createLucideIcon-ZlkySu63.js";import{I as P}from"./input-B7V3-qYC.js";import{C as A}from"./confirm-dialog-CV5Vh1N_.js";import{u as D,T as I,c as M,d as E,e as L}from"./small-mode-toggle-Cq2mG1yl.js";import{H as $,L as i,r as x}from"./app-gPlSlMMq.js";import{C as K,a as z,b as B,c as H}from"./card-CxStm2Cj.js";import{S as W}from"./sidebar-layout-OYZ-sQvn.js";import{P as Y}from"./protected-page-DDXWLHu3.js";import{P as h}from"./plus-CAg_Nzbs.js";import{S as f}from"./search-ByXekZDD.js";import{E as q}from"./eye-CzQx9l1P.js";import{S as F,T as R}from"./trash-2-DJ08tf8b.js";import"./vendor-CjZsb-BP.js";import"./index-DaO20brY.js";import"./index-PXYs5pws.js";import"./app-logo-icon-DvYaJ0Ys.js";/* empty css            */const U=[{title:"Dashboard",href:"/dashboard"},{title:"Warga Mukim",href:"/anggota-keluarga"}];function ce({anggotaKeluarga:a,filters:g}){const[j,n]=c.useState(!1),[u,m]=c.useState(null),[p,y]=c.useState(g.search||""),{hasPermission:k}=D(),b=()=>{x.get("/anggota-keluarga",{search:p||void 0},{preserveState:!0,replace:!0})},N=r=>{if(!r)return"-";try{const t=new Date(r);if(isNaN(t.getTime()))return r;const l=t.getDate().toString().padStart(2,"0"),o=(t.getMonth()+1).toString().padStart(2,"0"),d=t.getFullYear();return`${l} ${o} ${d}`}catch{return r||"-"}},v=(r,t=15)=>r.length<=t?r:r.substring(0,t)+"...",w=r=>{if(!r)return"-";try{const t=new Date(r),l=new Date;if(isNaN(t.getTime()))return"-";let o=l.getFullYear()-t.getFullYear();const d=l.getMonth()-t.getMonth();return(d<0||d===0&&l.getDate()<t.getDate())&&o--,o.toString()+" tahun"}catch{return"-"}},_=(r,t)=>r?t||"Ada":"Belum Ada",C=r=>{m(r),n(!0)},S=()=>{u&&x.delete(`/anggota-keluarga/${u}`),n(!1),m(null)},T=()=>{n(!1),m(null)};return e.jsx(Y,{permission:"anggota_keluarga_read",children:e.jsxs(W,{breadcrumbs:U,children:[e.jsx($,{title:"Warga Mukim"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 rounded-lg border border-blue-200/50 dark:border-blue-700/50 shadow-lg",children:[e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Warga Mukim"})}),e.jsx(s,{asChild:!0,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 border-0 shadow-md transition-all duration-200 hover:shadow-lg",children:e.jsxs(i,{href:"/anggota-keluarga/create",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Tambah Data"]})})]}),e.jsxs(K,{className:"border-blue-200/50 dark:border-blue-700/50 shadow-xl",children:[e.jsx(z,{className:"border-b border-blue-200/50 dark:border-blue-700/50",children:e.jsx(B,{className:"text-gray-800 dark:text-gray-200",children:"Daftar Anggota Keluarga Warga Mukim"})}),e.jsxs(H,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{placeholder:"Cari nama, NIK, atau nomor KK...",value:p,onChange:r=>y(r.target.value),onKeyPress:r=>r.key==="Enter"&&b(),className:"pl-9"})]})}),e.jsxs(s,{onClick:b,variant:"outline",className:"hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-all duration-200",children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"Cari"]})]}),a.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-blue-200/50 dark:border-blue-700/50 bg-gradient-to-r from-blue-50/30 to-purple-50/30 dark:from-blue-900/20 dark:to-purple-900/20",children:[e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"No"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"No KK/NIK"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Nama"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Jenis Kelamin"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Tanggal Lahir"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Usia"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Status eKTP"}),e.jsx("th",{className:"px-4 py-2 text-left font-semibold text-gray-700 dark:text-gray-300",children:"Aksi"})]})}),e.jsx("tbody",{children:a.data.map((r,t)=>e.jsxs("tr",{className:"border-b border-gray-200/50 dark:border-gray-700/50 hover:bg-gradient-to-r hover:from-blue-50/50 hover:to-purple-50/50 dark:hover:from-blue-900/20 dark:hover:to-purple-900/20 transition-all duration-200",children:[e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200",children:(a.current_page-1)*a.per_page+t+1}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200 font-mono text-sm",children:r.no_kk}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 font-mono",children:r.nik})]})}),e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200 font-medium",children:e.jsx(I,{children:e.jsxs(M,{children:[e.jsx(E,{asChild:!0,children:e.jsx("span",{className:"cursor-help",children:v(r.nama_lengkap)})}),e.jsx(L,{children:e.jsx("p",{children:r.nama_lengkap})})]})})}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.jenis_kelamin==="LAKI-LAKI"?"bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-700 border border-blue-200":r.jenis_kelamin==="PEREMPUAN"?"bg-gradient-to-r from-pink-100 to-purple-100 text-pink-700 border border-pink-200":"bg-gradient-to-r from-gray-100 to-slate-100 text-gray-700 border border-gray-200"}`,children:r.jenis_kelamin==="LAKI-LAKI"?"Laki-laki":r.jenis_kelamin==="PEREMPUAN"?"Perempuan":r.jenis_kelamin||"-"})}),e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200",children:N(r.tanggal_lahir)}),e.jsx("td",{className:"px-4 py-2 text-gray-800 dark:text-gray-200 font-medium",children:w(r.tanggal_lahir)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r.has_e_ktp?"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border border-green-200":"bg-gradient-to-r from-red-100 to-pink-100 text-red-700 border border-red-200"}`,children:_(r.has_e_ktp,r.kondisi_e_ktp)})}),e.jsx("td",{className:"px-4 py-2",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(s,{variant:"outline",size:"sm",className:"hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300 transition-all duration-200 shadow-sm hover:shadow-md",asChild:!0,children:e.jsx(i,{href:`/anggota-keluarga/${r.id}`,children:e.jsx(q,{className:"h-4 w-4"})})}),k("anggota_keluarga_edit")&&e.jsx(s,{variant:"outline",size:"sm",className:"hover:bg-indigo-50 hover:text-indigo-600 hover:border-indigo-300 transition-all duration-200 shadow-sm hover:shadow-md",asChild:!0,children:e.jsx(i,{href:`/anggota-keluarga/${r.id}/edit`,children:e.jsx(F,{className:"h-4 w-4"})})}),e.jsx(s,{variant:"outline",size:"sm",onClick:()=>C(r.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 hover:border-red-300 transition-all duration-200 shadow-sm hover:shadow-md",children:e.jsx(R,{className:"h-4 w-4"})})]})})]},r.id))})]})}):e.jsxs("div",{className:"text-center py-12 bg-gradient-to-br from-blue-50/30 to-purple-50/30 dark:from-blue-900/10 dark:to-purple-900/10 rounded-lg border-2 border-dashed border-blue-200/50 dark:border-blue-700/50",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"w-16 h-16 mx-auto bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-900/50 dark:to-purple-900/50 rounded-full flex items-center justify-center",children:e.jsx(h,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})})}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4 text-lg",children:"Belum ada data anggota keluarga."}),e.jsx(s,{asChild:!0,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 border-0 shadow-md transition-all duration-200 hover:shadow-lg",children:e.jsxs(i,{href:"/anggota-keluarga/create",children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Tambah Anggota Keluarga"]})})]}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-blue-200/50 dark:border-blue-700/50",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Menampilkan ",(a.current_page-1)*a.per_page+1," sampai"," ",Math.min(a.current_page*a.per_page,a.total)," dari"," ",a.total," hasil"]}),e.jsx("div",{className:"flex gap-2",children:a.links.map((r,t)=>e.jsx(s,{variant:r.active?"default":"outline",size:"sm",disabled:!r.url,onClick:()=>r.url&&x.get(r.url),className:r.active?"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 border-0":"hover:bg-blue-50 hover:text-blue-600 hover:border-blue-300",children:r.label.replace("&laquo;","«").replace("&raquo;","»")},t))})]})]})]})]}),e.jsx(A,{open:j,title:"Konfirmasi Hapus",description:"Yakin ingin menghapus anggota keluarga ini?",onConfirm:S,onCancel:T})]})})}export{ce as default};
