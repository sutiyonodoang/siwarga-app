import{r as c,j as d}from"./utils-BSArQRAP.js";import{a as b}from"./app-gPlSlMMq.js";function R({onChange:y,value:i}){const[m,E]=c.useState([]),[v,S]=c.useState([]),[p,x]=c.useState([]),[_,u]=c.useState([]),[o,j]=c.useState(),[t,h]=c.useState(),[l,f]=c.useState(),[a,r]=c.useState();return c.useEffect(()=>{b.get("/api/regions/provinces").then(e=>{const n=e.data.sort((s,g)=>s.name.localeCompare(g.name));E(n)})},[]),c.useEffect(()=>{if(console.log("RegionSelect received value:",i),console.log("Provinces available:",m.length),i?.province_id&&i.province_id!==""&&m.length>0){console.log("Looking for province with ID:",i.province_id);const e=m.find(n=>String(n.id)===String(i.province_id));console.log("Found province:",e),e&&e.id!==o?.id&&j(e)}else console.log("Province selected: undefined (empty or no value)"),o&&(!i?.province_id||i.province_id==="")&&(j(void 0),h(void 0),f(void 0),r(void 0))},[i?.province_id,m]),c.useEffect(()=>{if(i?.regency_id&&i.regency_id!==""&&v.length>0){const e=v.find(n=>String(n.id)===String(i.regency_id));e&&e.id!==t?.id&&h(e)}else!i?.regency_id&&t&&h(void 0)},[i?.regency_id,v]),c.useEffect(()=>{if(i?.district_id&&i.district_id!==""&&p.length>0){const e=p.find(n=>String(n.id)===String(i.district_id));e&&e.id!==l?.id&&f(e)}else!i?.district_id&&l&&f(void 0)},[i?.district_id,p]),c.useEffect(()=>{if(i?.village_id&&i.village_id!==""&&_.length>0){const e=_.find(n=>String(n.id)===String(i.village_id));e&&e.id!==a?.id&&r(e)}else!i?.village_id&&a&&r(void 0)},[i?.village_id,_]),c.useEffect(()=>{if(o){if(console.log("Loading regencies for province:",o.id,o.name),b.get(`/api/regions/regencies?province_id=${o.id}`).then(e=>{console.log("Regencies loaded:",e.data.length,"items"),e.data.length===0&&console.warn("No regencies found for province:",o.name,"- Data might not be available for this province"),console.log("Sample regencies:",e.data.slice(0,3));const n=e.data.sort((s,g)=>s.name.localeCompare(g.name));S(n)}).catch(e=>{console.error("Error loading regencies:",e),S([])}),!i?.regency_id||i.regency_id===""){const e={province_id:o.id,province_name:o.name,regency_id:void 0,regency_name:void 0,district_id:void 0,district_name:void 0,village_id:void 0,village_name:void 0};console.log("Sending province data to parent:",e),y(e)}}else S([]),x([]),u([]),h(void 0),f(void 0),r(void 0)},[o]),c.useEffect(()=>{t?(console.log("Loading districts for regency:",t.id,t.name),b.get(`/api/regions/districts?regency_id=${t.id}`).then(e=>{console.log("Districts loaded:",e.data.length,"items");const n=e.data.sort((s,g)=>s.name.localeCompare(g.name));x(n)}).catch(e=>{console.error("Error loading districts:",e),x([])}),(!i?.district_id||i.district_id==="")&&y({province_id:o?.id,province_name:o?.name,regency_id:t.id,regency_name:t.name,district_id:void 0,district_name:void 0,village_id:void 0,village_name:void 0})):(x([]),u([]),f(void 0),r(void 0))},[t,o]),c.useEffect(()=>{l?(console.log("Loading villages for district:",l.id,l.name),b.get(`/api/regions/villages?district_id=${l.id}`).then(e=>{console.log("Villages loaded:",e.data.length,"items");const n=e.data.sort((s,g)=>s.name.localeCompare(g.name));u(n)}).catch(e=>{console.error("Error loading villages:",e),u([])}),(!i?.village_id||i.village_id==="")&&y({province_id:o?.id,province_name:o?.name,regency_id:t?.id,regency_name:t?.name,district_id:l.id,district_name:l.name,village_id:void 0,village_name:void 0})):(u([]),r(void 0))},[l,o,t]),c.useEffect(()=>{a&&y({province_id:o?.id,province_name:o?.name,regency_id:t?.id,regency_name:t?.name,district_id:l?.id,district_name:l?.name,village_id:a.id,village_name:a.name})},[a,o,t,l]),d.jsxs("div",{className:"space-y-4 md:col-span-2",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Provinsi"}),d.jsxs("select",{value:o?.id||"",onChange:e=>{console.log("Province onChange event:",e.target.value);const n=m.find(s=>String(s.id)===e.target.value);console.log("Province selected:",n),j(n)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Pilih Provinsi..."}),m.map(e=>d.jsx("option",{value:e.id,children:e.name},e.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Kota/Kabupaten"}),d.jsxs("select",{value:t?.id||"",onChange:e=>{console.log("Regency onChange event:",e.target.value),console.log("Available regencies sample:",v.slice(0,3).map(s=>({id:s.id,type:typeof s.id,name:s.name})));const n=v.find(s=>String(s.id)===e.target.value);console.log("Regency selected:",n),h(n)},disabled:!o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[d.jsx("option",{value:"",children:"Pilih Kota/Kabupaten..."}),v.map(e=>(console.log("Rendering regency option:",e.id,e.name),d.jsx("option",{value:e.id,children:e.name},e.id)))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Kecamatan"}),d.jsxs("select",{value:l?.id||"",onChange:e=>{console.log("District onChange event:",e.target.value);const n=p.find(s=>String(s.id)===e.target.value);console.log("District selected:",n),f(n)},disabled:!t,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[d.jsx("option",{value:"",children:"Pilih Kecamatan..."}),p.map(e=>d.jsx("option",{value:e.id,children:e.name},e.id))]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("label",{className:"text-sm font-medium",children:"Kelurahan/Desa"}),d.jsxs("select",{value:a?.id||"",onChange:e=>{console.log("Village onChange event:",e.target.value);const n=_.find(s=>String(s.id)===e.target.value);console.log("Village selected:",n),r(n)},disabled:!l,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100",children:[d.jsx("option",{value:"",children:"Pilih Kelurahan/Desa..."}),_.map(e=>d.jsx("option",{value:e.id,children:e.name},e.id))]})]})]})}export{R};
